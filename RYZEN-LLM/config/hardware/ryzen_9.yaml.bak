# AMD Ryzen 9 Hardware Profile
# Target: Ryzen 9 7950X / 7950X3D (16 cores, 32 threads)

hardware:
  name: "AMD Ryzen 9"
  cpu:
    model: "Ryzen 9 7950X"
    cores: 16
    threads: 32
    base_clock_ghz: 4.5
    boost_clock_ghz: 5.7
    
    # Cache
    l1_cache_kb: 64  # per core (32KB I + 32KB D)
    l2_cache_kb: 1024  # per core
    l3_cache_mb: 64  # shared (2x 32MB CCDs)
    
    # Features
    features:
      - "avx2"
      - "avx512f"
      - "avx512_vnni"
      - "fma3"
      - "bmi2"
    
    # SIMD
    simd:
      vector_width: 512
      max_registers: 32
  
  memory:
    type: "DDR5"
    speed_mhz: 5600
    channels: 2
    bandwidth_gbs: 89.6
    capacity_gb: 64
  
  # Thermal
  thermal:
    tdp_watts: 170
    max_temp_celsius: 95

# Performance Configuration
performance:
  # Thread allocation
  threading:
    inference_threads: 24  # Leave 8 threads for system/parallel requests
    io_threads: 4
    background_threads: 4
  
  # Affinity
  cpu_affinity:
    enabled: true
    # Bind to first CCD for better cache locality
    core_list: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23]
  
  # Memory
  memory:
    huge_pages: true
    numa_policy: "interleave"
    prefetch_distance: 16
  
  # SIMD optimization
  simd:
    tile_size: 128
    block_size: 512
    unroll_factor: 8

# Model Recommendations
models:
  recommended:
    - name: "bitnet-7b"
      batch_size: 8
      concurrent_requests: 5
    - name: "bitnet-13b"
      batch_size: 4
      concurrent_requests: 3
    - name: "mamba-2.8b"
      batch_size: 16
      concurrent_requests: 8
    - name: "mamba-7b"
      batch_size: 8
      concurrent_requests: 4
    - name: "rwkv-7b"
      batch_size: 8
      concurrent_requests: 6
  
  # Can run multiple models simultaneously
  multi_model:
    enabled: true
    combinations:
      - ["bitnet-7b", "mamba-2.8b"]
      - ["bitnet-7b", "draft-350m"]
      - ["mamba-2.8b", "rwkv-7b"]
  
  # Memory budget allocation
  memory_budget:
    total_gb: 32.0
    models: 16.0
    kv_cache: 8.0
    rsu_bank: 4.0
    system: 4.0

# Performance Targets
targets:
  ttft_ms: 400
  tokens_per_second: 25
  concurrent_users: 8
  max_context_length: 8192
